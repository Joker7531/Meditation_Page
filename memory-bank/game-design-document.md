```markdown
<!-- file: game-design-document.md -->

# Game Design Document (GDD)
# Breathing Circle（辅助冥想 Web 应用）— 产品需求文档（仅产品需求）

**文档版本**：v1.0（重写稿）  
**创建日期**：2026-02-01  
**目标发布**：MVP（桌面端 Web）  

---

## 1. 产品概述

### 1.1 产品定位
Breathing Circle 是一款极简风格的呼吸冥想引导 Web 应用，通过呼吸圈动画与文字提示，引导用户完成 **4-7-8 呼吸法**练习，帮助放松、缓解焦虑、辅助入睡。

### 1.2 核心价值
- **极简专注**：深色无干扰界面，减少决策与操作成本  
- **直观引导**：视觉呼吸节奏 + 文本提示，降低学习门槛  
- **即用即走**：无需注册登录，打开即用  
- **可控时长**：支持预设与自定义时长，适配碎片场景  

### 1.3 使用场景
- 工作间隙快速放松（3–15 分钟）
- 睡前助眠（10–20 分钟）
- 焦虑/紧张时的呼吸训练（1–10 分钟）

---

## 2. 产品目标与成功指标

### 2.1 MVP 目标（必须实现）
- 完整可用的 **4-7-8** 呼吸引导流程（吸气/屏息/呼气循环）
- 流畅、沉浸的呼吸圈动画（含基础粒子效果）
- 时长选择、开始/暂停/继续/结束/重开等基础控制
- 完成页展示关键统计信息

### 2.2 成功指标（MVP）
**使用指标**
- DAU > 20
- WAU > 50
- 平均单次 session 时长 > 5 分钟
- session 完成率（自动到达设定时长） > 70%

**体验/质量指标**
- 首屏加载 < 2 秒（桌面端）
- 动画稳定帧率 > 55 FPS
- JS 错误率 < 1%

---

## 3. 目标用户

### 3.1 用户画像
- 都市白领：压力大、需要快速放松工具
- 冥想初学者：需要简单明确的引导
- 睡眠困难者：睡前放松辅助
- 焦虑人群：情绪调节与压力缓解

### 3.2 用户需求
- 进入快、操作少
- 节奏清晰、提示准确
- 过程不被打断、沉浸感强
- 可选择练习时长

---

## 4. 信息架构与页面

### 4.1 页面结构
- 开始页（Landing）
- 冥想进行页（Meditation）
- 完成页（Completion）

### 4.2 全局交互原则
- 默认深色背景、低刺激
- 任何可交互元素需支持键盘焦点
- 练习过程中尽量隐藏干扰元素（控制按钮弱化显示）
- 所有时间与统计口径一致（见第 7 节）

---

## 5. 功能需求（MVP）

### 5.1 开始页（Landing）

#### 5.1.1 目标
让用户在最少操作下选择练习时长并开始冥想。

#### 5.1.2 功能点（含优先级）
| 功能项 | 说明 | 优先级 |
|---|---|---|
| 预设时长 | 5 分钟、10 分钟、15 分钟 | P0 |
| 自定义时长 | 1–60 分钟，整数输入 | P0 |
| 输入校验 | 非法/超范围提示：“请输入 1-60 之间的整数” | P0 |
| 开始按钮 | 有效时长选择后可点击，进入进行页 | P0 |
| 默认选中 | 默认选中 10 分钟 | P1 |
| 呼吸圈预览 | 静态或慢动画预览（氛围） | P2 |

#### 5.1.3 交互规则
- 点击预设时长：高亮选中，清空自定义输入框
- 输入自定义时长：取消预设高亮
- 未选择有效时长：开始按钮置灰不可点
- 校验失败：显示错误文案，开始按钮不可用

---

### 5.2 冥想进行页（Meditation）

#### 5.2.1 目标
以视觉节奏与文字提示引导用户持续进行 4-7-8 呼吸练习，并允许最小干预式控制（暂停/继续/重开/结束）。

#### 5.2.2 核心组件 A：呼吸圈动画（P0）
**视觉规格**
- 光点数量：40–60
- 光点大小：4–6 px（随机）
- 分布：80% 主圈 + 20% 外围散落
- 颜色：`#6366f1` → `#a78bfa` 渐变
- 发光：`box-shadow: 0 0 10px rgba(99, 102, 241, 0.6)`
- 初始大小：约为视口高度 40%（响应式）
- 缩放范围：80% → 120%

**4-7-8 动画节奏**
- 吸气：4 秒，呼吸圈从 80% 放大到 120%
- 屏息：7 秒，保持 120%
- 呼气：8 秒，从 120% 缩小到 80%
- 循环：19 秒为一轮，连续循环
- 缓动：`ease-in-out`

**微动画（P1，MVP 默认开启）**
- 漂移：每个光点在 ±5 px 范围内缓慢漂移，周期 15–20 秒（随机）
- 闪烁：透明度 0.7–1.0 之间变化，周期 10–15 秒（随机）
- 每个光点独立随机周期，避免同步感

#### 5.2.3 核心组件 B：文字提示（P0）
**显示规则**
| 阶段 | 文案 | 时间窗口（每轮） |
|---|---|---|
| 吸气 | Breathe in | 0–4s |
| 屏息 | Hold | 4–11s |
| 呼气 | Breathe out | 11–19s |

**样式**
- 字体：Nunito Regular
- 字号：24 px
- 颜色：`#e5e7eb`
- 位置：呼吸圈下方，间距约 40 px
- 切换：淡入淡出 0.5 秒

#### 5.2.4 核心组件 C：控制按钮（P0）
**按钮**
- 暂停 / 继续（toggle）
- 重新开始（重置本次 session）
- 结束（提前结束并进入完成页）

**显示/隐藏机制（P1，MVP 默认开启）**
- 默认透明度 0.1
- 鼠标悬停区域透明度过渡到 1.0
- 过渡 0.3 秒
- 位置：顶部居中，水平排列，间距 16 px

**按钮行为**
| 操作 | 结果 |
|---|---|
| 暂停 | 停止计时与动画推进；按钮文字切换为“继续” |
| 继续 | 恢复计时与动画推进；按钮文字切换为“暂停” |
| 重新开始 | elapsed 归零、轮数归零、从吸气阶段开始 |
| 结束 | 立即进入完成页，标记为“提前结束” |

#### 5.2.5 核心组件 D：计时与轮数（P0）
**追踪字段**
- 设定时长：用户选择目标时长（秒）
- 实际时长：开始到结束的累计秒数（**不含暂停时间**）
- 完成轮数：完整完成的 19 秒轮次

**轮数定义**
- 1 轮 = 19 秒（4 + 7 + 8）
- 完成轮数 = floor(实际时长 / 19)

**结束条件**
- 自动结束：实际时长 ≥ 设定时长 → 自动跳转完成页（标记为“正常完成”）
- 手动结束：用户点击“结束” → 立即跳转完成页（标记为“提前结束”）

---

### 5.3 完成页（Completion）

#### 5.3.1 目标
在不打扰用户的情况下给出清晰反馈：本次用时与（如适用）完成轮数，并提供快捷再练一次。

#### 5.3.2 展示内容（P0）
| 元素 | 说明 |
|---|---|
| 图标 | 完成：勾选图标（SVG，`#10b981`） |
| 标题 | 正常完成：“冥想完成！”；提前结束：“冥想结束” |
| 实际时长 | “本次时长：Xm Ys” 或 “X分YY秒” |
| 完成轮数 | 仅在“正常完成”时显示；提前结束不显示或显示“未完成” |
| 操作 | “再来一次”“返回首页” |

#### 5.3.3 按钮行为（P0）
- 再来一次：回到开始页并**保留上次时长选择**
- 返回首页：回到开始页并**重置选择**

---

## 6. 非功能需求（产品侧可验收）

### 6.1 性能
| 指标 | 目标 |
|---|---|
| 首屏加载时间 | < 2 秒 |
| 动画帧率 | ≥ 55 FPS（目标 60 FPS） |
| 页面体积 | < 500 KB（未压缩口径） |
| 内存占用 | < 100 MB（典型桌面浏览器） |

### 6.2 兼容性
- 支持：Chrome / Edge / Firefox 最新版（120+），Safari 17+
- 不支持：IE 及低版本浏览器
- 不在 MVP 范围：移动端浏览器（后续版本）

不支持时提示文案：
- “请使用最新版 Chrome / Firefox / Safari / Edge 浏览器访问”

### 6.3 可访问性（MVP 基线）
- Tab 键可遍历可交互元素
- 焦点样式明显可见
- 语义化 HTML（按钮用 button、输入用 input/label）

---

## 7. 数据口径与状态定义（用于一致性验收）

### 7.1 Session 定义
- Session：用户点击“开始冥想”进入进行页起，到“自动结束”或“手动结束”进入完成页止。

### 7.2 时间口径
- 实际时长：只累计“进行中且未暂停”的时间段  
- 暂停期间：不累计到实际时长；动画与阶段推进冻结

### 7.3 完成/提前结束定义
- 正常完成：由系统检测实际时长达到设定时长触发完成页
- 提前结束：用户主动点击“结束”触发完成页

---

## 8. MVP 范围与优先级

### 8.1 MVP（必须交付，P0）
- 开始页：时长预设 + 自定义输入 + 校验 + 开始
- 进行页：4-7-8 节奏、呼吸圈缩放、文字提示、暂停/继续/结束/重开
- 完成页：实际时长展示；正常完成时展示轮数；再来一次/返回首页

### 8.2 MVP 增强（可同版本交付，P1）
- 光点微动画（漂移+闪烁）
- 控制按钮弱化显示（悬停显示）

### 8.3 明确不做（MVP 不包含）
- 登录/注册、用户系统
- 冥想历史记录与统计图表
- 音频（背景音乐/提示音）
- 移动端适配与 PWA

---

## 9. 风险与依赖（产品层面）

### 9.1 风险
| 风险 | 影响 |
|---|---|
| 动画在部分设备卡顿 | 沉浸感下降、完成率下降 |
| 字体加载导致闪烁/布局跳动 | 首屏体验受损 |
| 计时/暂停口径不一致 | 统计错误、信任下降 |

### 9.2 依赖
- 可用的现代桌面浏览器环境
- 可访问的字体资源（或可接受的回退字体）

---

## 10. 验收清单（MVP）

### 10.1 开始页
- [ ] 预设 5/10/15 分钟可选且互斥
- [ ] 自定义输入 1–60（整数），非法提示正确
- [ ] 无有效时长时开始按钮不可点击
- [ ] 有效时长时可进入进行页

### 10.2 进行页
- [ ] 呼吸圈缩放节奏符合 4-7-8（19 秒/轮）
- [ ] 文案在三个阶段正确切换且淡入淡出
- [ ] 暂停后：计时冻结、动画冻结；继续后恢复
- [ ] 重新开始：状态归零并从吸气开始
- [ ] 结束：立即进入完成页并标记提前结束
- [ ] 达到设定时长：自动进入完成页并标记正常完成

### 10.3 完成页
- [ ] 正常完成：显示实际时长 + 完成轮数
- [ ] 提前结束：显示实际时长；轮数不显示或显示未完成
- [ ] 再来一次：保留上次时长
- [ ] 返回首页：清空选择

---
```